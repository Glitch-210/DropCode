"use strict";(()=>{var e={};e.id=931,e.ids=[931],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},1458:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>x,originalPathname:()=>v,patchFetch:()=>S,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>g});var a={};t.r(a),t.d(a,{POST:()=>p});var o=t(5419),s=t(9108),n=t(9678),i=t(8070);let u=new(t(9125)).s({url:process.env.UPSTASH_REDIS_REST_URL,token:process.env.UPSTASH_REDIS_REST_TOKEN});async function p(e){try{let{shareCode:r,files:t,settings:a}=await e.json();if(!r||!t||0===t.length)return i.Z.json({error:"Invalid payload"},{status:400});let o=a?.expiryMinutes||60,s=60*o,n={shareCode:r,files:t,createdAt:Date.now(),expiresAt:Date.now()+1e3*s,downloadsLeft:a?.maxDownloads||5,downloads:0,originalName:t.length>1?`${t.length} Files`:t[0].originalName};return await u.set(`share:${r}`,n,{ex:s}),i.Z.json({success:!0,shareCode:r,expiresAt:n.expiresAt})}catch(e){return console.error("Metadata registration failed:",e),i.Z.json({error:"Internal Server Error"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/share/route",pathname:"/api/share",filename:"route",bundlePath:"app/api/share/route"},resolvedPagePath:"X:\\projects\\DropCode\\app\\api\\share\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:c,serverHooks:h,headerHooks:x,staticGenerationBailout:g}=l,v="/api/share/route";function S(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:c})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,206,125],()=>t(1458));module.exports=a})();