"use strict";(()=>{var e={};e.id=182,e.ids=[182],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},5910:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>w,originalPathname:()=>x,patchFetch:()=>S,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>m});var o={};t.r(o),t.d(o,{POST:()=>u});var a=t(5419),n=t(9108),s=t(9678),d=t(8070),i=t(156);async function u(e){try{let{code:r}=await e.json();if(!r)return d.Z.json({error:"Code required"},{status:400});let t=await i.T.get(`dropcode:${r}`);if(!t)return d.Z.json({error:"Code expired or invalid"},{status:404});if(t.downloads>=t.maxDownloads)return d.Z.json({error:"Limit Reached"},{status:403});return t.downloads++,await i.T.set(`dropcode:${r}`,t,{ex:600}),t.files.length,d.Z.json({url:t.files[0].url})}catch(e){return d.Z.json({error:"System Error"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/download/route",pathname:"/api/download",filename:"route",bundlePath:"app/api/download/route"},resolvedPagePath:"X:\\projects\\DropCode\\app\\api\\download\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:h,headerHooks:w,staticGenerationBailout:m}=p,x="/api/download/route";function S(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:c})}},156:(e,r,t)=>{t.d(r,{T:()=>o});let o=new(t(9125)).s({url:process.env.UPSTASH_REDIS_REST_URL||"https://example.upstash.io",token:process.env.UPSTASH_REDIS_REST_TOKEN||"example_token"})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,206,125],()=>t(5910));module.exports=o})();