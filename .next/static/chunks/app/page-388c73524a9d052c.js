(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7855:function(e,t,r){Promise.resolve().then(r.bind(r,6985)),Promise.resolve().then(r.bind(r,7306))},6985:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(3827),s=r(7306),n=r(4090);let l="/api",o=async(e,t)=>{let r=new FormData;(e instanceof FileList?Array.from(e):e).forEach(e=>{r.append("files",e)});let a=new XMLHttpRequest;return new Promise((e,s)=>{a.upload.addEventListener("progress",e=>{e.lengthComputable&&t&&t(Math.round(100*e.loaded/e.total))}),a.addEventListener("load",()=>{if(a.status>=200&&a.status<300)try{let t=JSON.parse(a.responseText);e(t)}catch(e){s({error:"Invalid response"})}else try{let e=JSON.parse(a.responseText);s(e)}catch(e){s({error:"Upload failed"})}}),a.addEventListener("error",()=>{s({error:"Network Error"})}),a.addEventListener("abort",()=>{s({error:"Upload Cancelled"})}),a.open("POST","".concat(l,"/upload")),a.send(r)})},i=async e=>{let t=await fetch("".concat(l,"/verify?code=").concat(encodeURIComponent(e))),r=await t.json();if(!t.ok)throw r;return r},c=async(e,t)=>{let r=await fetch("".concat(l,"/verify"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,...t})}),a=await r.json();if(!r.ok)throw a;return a},d=e=>"".concat(l,"/download?code=").concat(encodeURIComponent(e));function p(){let{startUpload:e,setProgress:t,uploadSuccess:r,uploadError:l}=(0,s.useApp)(),[i,c]=(0,n.useState)(!1),d=(0,n.useRef)(null),p=async a=>{if(!a||0===a.length)return;let s=0,n=a instanceof FileList?Array.from(a):a;for(let e of n)s+=e.size;if(s>209715200){alert("Total size too large (Max 200MB)");return}e();try{let e=await o(n,e=>{t(e)});setTimeout(()=>{r(e)},300)}catch(e){console.error(e),l(e.error||"Upload failed")}};return(0,a.jsxs)("div",{className:"brutal-upload-zone ".concat(i?"dragover":""),onDrop:e=>{e.preventDefault(),c(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&p(e.dataTransfer.files)},onDragOver:e=>{e.preventDefault(),c(!0)},onDragLeave:()=>{c(!1)},onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)("input",{type:"file",multiple:!0,style:{display:"none"},ref:d,onChange:e=>p(e.target.files),"aria-label":"Upload File"}),(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.5rem",pointerEvents:"none"},children:i?"Drop It!":"Drop File Here"}),(0,a.jsx)("p",{style:{marginTop:"var(--space-md)",color:"#666",pointerEvents:"none"},children:"CLICK IF YOU MUST"})]})}function u(){let{state:e}=(0,s.useApp)();return(0,a.jsxs)("div",{className:"text-center",style:{width:"100%",padding:"var(--space-lg) 0"},children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.2rem",marginBottom:"var(--space-md)"},children:"UPLOADING..."}),(0,a.jsx)("div",{className:"brutal-progress",children:(0,a.jsx)("div",{className:"brutal-progress-fill",style:{width:"".concat(e.progress,"%")}})}),(0,a.jsxs)("p",{className:"font-bold",style:{fontSize:"3rem",marginTop:"var(--space-md)",lineHeight:"1"},children:[e.progress,"%"]})]})}function m(){let{state:e,reset:t,uploadSuccess:r}=(0,s.useApp)(),{code:l,expiresAt:o,expiryMinutes:i,maxDownloads:d}=e.data||{},[p,u]=(0,n.useState)(""),[m,f]=(0,n.useState)(!1),[h,y]=(0,n.useState)(i||10),[x,E]=(0,n.useState)("Unlimited"===d?"Unlimited":d||"Unlimited");(0,n.useEffect)(()=>{if(!o)return;let e=()=>{let e=o-Date.now();if(e<=0){u("EXPIRED");return}let t=Math.floor(e%6e4/1e3);u("".concat(Math.floor(e/6e4),":").concat(t<10?"0":"").concat(t))};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[o]);let v=async t=>{if(l)try{let a=await c(l,t);r({...e.data,...a}),t.expiryMinutes&&y(t.expiryMinutes),void 0!==t.maxDownloads&&E(t.maxDownloads===1/0?"Unlimited":t.maxDownloads)}catch(e){console.error("Failed to update metadata",e),alert("Failed to update settings")}};return(0,a.jsxs)("div",{className:"text-center",style:{width:"100%",padding:"var(--space-lg) 0"},children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.2rem",marginBottom:"var(--space-md)"},children:"YOUR CODE"}),(0,a.jsx)("div",{className:"brutal-code",children:l}),(0,a.jsx)("div",{style:{marginTop:"var(--space-lg)"},children:(0,a.jsx)("button",{className:"brutal-button",onClick:()=>{l&&(navigator.clipboard.writeText(l),f(!0),setTimeout(()=>f(!1),2e3))},style:{minWidth:"200px"},children:m?"COPIED!":"COPY CODE"})}),(0,a.jsxs)("div",{style:{marginTop:"var(--space-xl)",display:"flex",flexDirection:"column",gap:"var(--space-lg)",alignItems:"center"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"0.9rem",marginBottom:"var(--space-sm)"},children:"EXPIRES IN"}),(0,a.jsx)("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[5,10,30].map(e=>(0,a.jsxs)("button",{onClick:()=>v({expiryMinutes:e}),style:{padding:"var(--space-xs) var(--space-md)",border:"2px solid black",fontWeight:"bold",backgroundColor:h===e?"var(--color-bg-accent)":"transparent",cursor:"pointer"},children:[e,"M"]},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"0.9rem",marginBottom:"var(--space-sm)"},children:"MAX DOWNLOADS"}),(0,a.jsx)("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[1,3,"Unlimited"].map(e=>(0,a.jsx)("button",{onClick:()=>v({maxDownloads:"Unlimited"===e?"Infinity":e}),style:{padding:"var(--space-xs) var(--space-md)",border:"2px solid black",fontWeight:"bold",backgroundColor:x===e?"var(--color-bg-accent)":"transparent",cursor:"pointer"},children:"Unlimited"===e?"âˆž":e},e))})]})]}),(0,a.jsxs)("p",{className:"font-bold",style:{marginTop:"var(--space-xl)",fontSize:"1.2rem"},children:["EXPIRES IN: ",(0,a.jsx)("span",{style:{color:"var(--color-accent-red)"},children:p})]}),(0,a.jsx)("p",{style:{marginTop:"var(--space-lg)",textDecoration:"underline",cursor:"pointer",opacity:.7},onClick:t,children:"SEND ANOTHER FILE"})]})}function f(){let{fetchFileStart:e,fetchFileSuccess:t,fetchFileError:r}=(0,s.useApp)(),[l,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),p=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null===(e=p.current)||void 0===e||e.focus()},[]);let u=async a=>{if(a.preventDefault(),l&&!(l.length<5)){d(!0),e();try{let e=await i(l);setTimeout(()=>{t(e)},500)}catch(t){console.error(t);let e=t.error||"File not found";e.includes("not found")&&(e="INVALID CODE"),r(e),d(!1)}}};return(0,a.jsxs)("div",{className:"text-center",style:{width:"100%",padding:"var(--space-lg) 0"},children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.2rem",marginBottom:"var(--space-md)"},children:"ENTER CODE"}),(0,a.jsxs)("form",{onSubmit:u,children:[(0,a.jsx)("input",{ref:p,type:"text",className:"brutal-input",placeholder:"XXXXX",maxLength:10,value:l,onChange:e=>o(e.target.value.toUpperCase()),disabled:c,"aria-label":"Enter download code"}),(0,a.jsx)("button",{type:"submit",className:"brutal-button",style:{width:"100%",marginTop:"var(--space-lg)"},disabled:c||l.length<5,children:c?"SEARCHING...":"GET FILE"})]})]})}function h(){let{state:e,reset:t}=(0,s.useApp)(),{code:r,originalName:l,size:o}=e.data||{};return(0,n.useEffect)(()=>{if(r){let e=d(r),t=setTimeout(()=>{window.location.href=e},1e3);return()=>clearTimeout(t)}},[r]),(0,a.jsxs)("div",{className:"text-center",style:{width:"100%",padding:"var(--space-lg) 0"},children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.2rem",marginBottom:"var(--space-md)"},children:"DOWNLOADING..."}),(0,a.jsxs)("div",{className:"brutal-container",style:{backgroundColor:"var(--color-bg-mint)"},children:[(0,a.jsx)("p",{className:"font-bold",style:{fontSize:"1.5rem",wordBreak:"break-all"},children:l}),(0,a.jsx)("p",{className:"text-mono",style:{marginTop:"var(--space-sm)"},children:(e=>{if(void 0===e||0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]})(o)})]}),(0,a.jsx)("div",{className:"brutal-progress",style:{marginTop:"var(--space-lg)"},children:(0,a.jsx)("div",{className:"brutal-progress-fill",style:{width:"100%",animation:"pulse 2s infinite"}})}),(0,a.jsx)("button",{className:"brutal-button",onClick:t,style:{marginTop:"var(--space-xl)",width:"100%"},children:"SEND A FILE"})]})}function y(){let{state:e,reset:t}=(0,s.useApp)(),{error:r}=e;return(0,a.jsxs)("div",{className:"text-center",style:{width:"100%",padding:"var(--space-lg) 0"},children:[(0,a.jsxs)("div",{className:"brutal-error brutal-container",style:{marginBottom:"var(--space-lg)"},children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.5rem",color:"var(--color-accent-red)"},children:"ERROR"}),(0,a.jsx)("p",{style:{marginTop:"var(--space-md)",fontSize:"1.2rem"},children:r||"SOMETHING WENT WRONG"})]}),(0,a.jsx)("button",{className:"brutal-button",onClick:t,style:{width:"100%"},children:"TRY AGAIN"})]})}function x(){let{state:e,setMode:t,reset:r}=(0,s.useApp)();return(0,a.jsxs)("div",{className:"full-screen",children:[(0,a.jsx)("div",{style:{position:"absolute",top:"2rem",right:"2rem"},children:(0,a.jsx)("button",{className:"brutal-button",style:{padding:"0.5rem 1rem",fontSize:"0.8rem"},onClick:()=>t("UPLOAD"===e.mode?"DOWNLOAD":"UPLOAD"),children:"UPLOAD"===e.mode?"SWITCH TO DOWNLOAD":"SWITCH TO UPLOAD"})}),(0,a.jsxs)("div",{className:"brutal-container",style:{maxWidth:"600px",width:"100%",minHeight:"400px",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,a.jsx)("h1",{className:"text-center",style:{marginBottom:"var(--space-xl)",cursor:"pointer"},onClick:r,role:"button",tabIndex:0,onKeyDown:e=>("Enter"===e.key||" "===e.key)&&r(),children:"DropCode"}),"IDLE"===e.status&&(0,a.jsx)(p,{}),"UPLOADING"===e.status&&(0,a.jsx)(u,{}),"GENERATED"===e.status&&(0,a.jsx)(m,{}),"DOWNLOAD_ENTRY"===e.status&&(0,a.jsx)(f,{}),"DOWNLOADING"===e.status&&(0,a.jsx)(h,{}),"ERROR"===e.status&&(0,a.jsx)(y,{})]})]})}},7306:function(e,t,r){"use strict";r.r(t),r.d(t,{AppProvider:function(){return i},useApp:function(){return c}});var a=r(3827),s=r(4090);let n={status:"IDLE",data:null,error:null,progress:0,mode:"UPLOAD"};function l(e,t){switch(t.type){case"SET_MODE":return{...e,mode:t.payload,status:"UPLOAD"===t.payload?"IDLE":"DOWNLOAD_ENTRY",error:null};case"START_UPLOAD":return{...e,status:"UPLOADING",progress:0,error:null};case"SET_PROGRESS":return{...e,progress:t.payload};case"UPLOAD_SUCCESS":return{...e,status:"GENERATED",data:t.payload,progress:100};case"UPLOAD_ERROR":return{...e,status:"ERROR",error:t.payload,progress:0};case"ENTER_DOWNLOAD":return{...e,status:"DOWNLOAD_ENTRY",error:null,data:null};case"FETCH_FILE_START":return{...e,status:"DOWNLOADING",progress:0,error:null};case"FETCH_FILE_SUCCESS":return{...e,status:"DOWNLOADING",data:t.payload};case"FETCH_FILE_ERROR":return{...e,status:"ERROR",error:t.payload};case"RESET":return{...n,mode:e.mode};default:return e}}let o=(0,s.createContext)(null);function i(e){let{children:t}=e,[r,i]=(0,s.useReducer)(l,n);return(0,a.jsx)(o.Provider,{value:{state:r,setMode:e=>i({type:"SET_MODE",payload:e}),startUpload:()=>i({type:"START_UPLOAD"}),setProgress:e=>i({type:"SET_PROGRESS",payload:e}),uploadSuccess:e=>i({type:"UPLOAD_SUCCESS",payload:e}),uploadError:e=>i({type:"UPLOAD_ERROR",payload:e}),enterDownload:()=>i({type:"ENTER_DOWNLOAD"}),fetchFileStart:()=>i({type:"FETCH_FILE_START"}),fetchFileSuccess:e=>i({type:"FETCH_FILE_SUCCESS",payload:e}),fetchFileError:e=>i({type:"FETCH_FILE_ERROR",payload:e}),reset:()=>i({type:"RESET"})},children:t})}function c(){let e=(0,s.useContext)(o);if(!e)throw Error("useApp must be used within an AppProvider");return e}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=7855)}),_N_E=e.O()}]);