(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7855:function(e,t,r){Promise.resolve().then(r.bind(r,5002)),Promise.resolve().then(r.bind(r,7306))},5002:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(3827),s=r(4090),n=r(7306),l=r(7878);let o="/api",i=async(e,t)=>{let r=e instanceof FileList?Array.from(e):e,a=[],s=0;for(let e=0;e<r.length;e++){let n=r[e];s+=n.size;try{let e=await (0,l.ws)(n.name,n,{access:"public",handleUploadUrl:"".concat(o,"/blob-upload"),onUploadProgress:e=>{if(t){let r=Math.round(e.percentage);t(r)}}});a.push({url:e.url,originalName:n.name,size:n.size,mimeType:n.type})}catch(e){throw console.error(e),{error:"Blob Upload Failed"}}}try{let e=await fetch("".concat(o,"/upload"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:a,totalSize:s})});if(!e.ok)throw await e.json();return await e.json()}catch(e){throw{error:e.error||"Registration Failed"}}},c=async e=>{let t=await fetch("".concat(o,"/verify?code=").concat(encodeURIComponent(e))),r=await t.json();if(!t.ok)throw r;return r},d=async(e,t)=>{let r=await fetch("".concat(o,"/verify"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,...t})}),a=await r.json();if(!r.ok)throw a;return a};function p(){let{startUpload:e,setProgress:t,uploadSuccess:r,uploadError:l}=(0,n.useApp)(),[o,c]=(0,s.useState)(!1),d=(0,s.useRef)(null),p=async a=>{if(!a||0===a.length)return;let s=0,n=a instanceof FileList?Array.from(a):a;for(let e of n)s+=e.size;if(s>209715200){alert("Total size too large (Max 200MB)");return}e();try{let e=await i(n,e=>{t(e)});setTimeout(()=>{r(e)},300)}catch(e){console.error(e),l(e.error||"Upload failed")}};return(0,a.jsxs)("div",{className:"brutal-upload-zone ".concat(o?"dragover":""),onDrop:e=>{e.preventDefault(),c(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&p(e.dataTransfer.files)},onDragOver:e=>{e.preventDefault(),c(!0)},onDragLeave:()=>{c(!1)},onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)("input",{type:"file",multiple:!0,style:{display:"none"},ref:d,onChange:e=>p(e.target.files),"aria-label":"Upload File"}),(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.5rem",pointerEvents:"none"},children:o?"Drop It!":"Drop File Here"}),(0,a.jsx)("p",{style:{marginTop:"var(--space-md)",color:"#666",pointerEvents:"none"},children:"CLICK IF YOU MUST"}),(0,a.jsxs)("div",{className:"text-mono",style:{marginTop:"var(--space-lg)",fontSize:"0.8rem",opacity:.7,pointerEvents:"none"},children:[(0,a.jsx)("p",{children:"MAX 200MB • 10 MIN EXPIRY"}),(0,a.jsx)("p",{children:"NO ACCOUNTS • NO LOGS"})]})]})}function u(){let{state:e}=(0,n.useApp)();return(0,a.jsxs)("div",{className:"text-center",style:{width:"100%",padding:"var(--space-lg) 0"},children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.2rem",marginBottom:"var(--space-md)"},children:"UPLOADING..."}),(0,a.jsx)("div",{className:"brutal-progress",children:(0,a.jsx)("div",{className:"brutal-progress-fill",style:{width:"".concat(e.progress,"%")}})}),(0,a.jsxs)("p",{className:"font-bold",style:{fontSize:"3rem",marginTop:"var(--space-md)",lineHeight:"1"},children:[e.progress,"%"]})]})}function m(){let{state:e,reset:t,uploadSuccess:r}=(0,n.useApp)(),{code:l,expiresAt:o,expiryMinutes:i,maxDownloads:c}=e.data||{},[p,u]=(0,s.useState)(""),[m,f]=(0,s.useState)(!1),[h,x]=(0,s.useState)(i||10),[y,g]=(0,s.useState)("Unlimited"===c?"Unlimited":c||"Unlimited");(0,s.useEffect)(()=>{if(!o)return;let e=()=>{let e=o-Date.now();if(e<=0){u("EXPIRED");return}let t=Math.floor(e%6e4/1e3);u("".concat(Math.floor(e/6e4),":").concat(t<10?"0":"").concat(t))};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[o]);let v=async t=>{if(l)try{let a=await d(l,t);r({...e.data,...a}),t.expiryMinutes&&x(t.expiryMinutes),void 0!==t.maxDownloads&&g(t.maxDownloads===1/0?"Unlimited":t.maxDownloads)}catch(e){console.error("Failed to update metadata",e),alert("Failed to update settings")}};return(0,a.jsxs)("div",{className:"text-center",style:{width:"100%",padding:"var(--space-lg) 0"},children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.2rem",marginBottom:"var(--space-md)"},children:"YOUR CODE"}),(0,a.jsx)("div",{className:"brutal-code",children:l}),(0,a.jsx)("div",{style:{marginTop:"var(--space-lg)"},children:(0,a.jsx)("button",{className:"brutal-button",onClick:()=>{l&&(navigator.clipboard.writeText(l),f(!0),setTimeout(()=>f(!1),2e3))},style:{minWidth:"200px"},children:m?"COPIED!":"COPY CODE"})}),(0,a.jsxs)("div",{style:{marginTop:"var(--space-xl)",display:"flex",flexDirection:"column",gap:"var(--space-lg)",alignItems:"center"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"0.9rem",marginBottom:"var(--space-sm)"},children:"EXPIRES IN"}),(0,a.jsx)("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[5,10,30].map(e=>(0,a.jsxs)("button",{onClick:()=>v({expiryMinutes:e}),style:{padding:"var(--space-xs) var(--space-md)",border:"2px solid black",fontWeight:"bold",backgroundColor:h===e?"var(--color-bg-accent)":"transparent",cursor:"pointer"},children:[e,"M"]},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"0.9rem",marginBottom:"var(--space-sm)"},children:"MAX DOWNLOADS"}),(0,a.jsx)("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[1,3,"Unlimited"].map(e=>(0,a.jsx)("button",{onClick:()=>v({maxDownloads:"Unlimited"===e?"Infinity":e}),style:{padding:"var(--space-xs) var(--space-md)",border:"2px solid black",fontWeight:"bold",backgroundColor:y===e?"var(--color-bg-accent)":"transparent",cursor:"pointer"},children:"Unlimited"===e?"∞":e},e))})]})]}),(0,a.jsxs)("p",{className:"font-bold",style:{marginTop:"var(--space-xl)",fontSize:"1.2rem"},children:["EXPIRES IN: ",(0,a.jsx)("span",{style:{color:"var(--color-accent-red)"},children:p})]}),(0,a.jsx)("p",{style:{marginTop:"var(--space-lg)",textDecoration:"underline",cursor:"pointer",opacity:.7},onClick:t,children:"SEND ANOTHER FILE"})]})}function f(){let{fetchFileStart:e,fetchFileSuccess:t,fetchFileError:r}=(0,n.useApp)(),[l,o]=(0,s.useState)(""),[i,d]=(0,s.useState)(!1),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{var e;null===(e=p.current)||void 0===e||e.focus()},[]);let u=async a=>{if(a.preventDefault(),l&&!(l.length<5)){d(!0),e();try{let e=await c(l);setTimeout(()=>{t(e)},500)}catch(t){console.error(t);let e=t.error||"File not found";e.includes("not found")&&(e="INVALID CODE"),r(e),d(!1)}}};return(0,a.jsxs)("div",{className:"text-center",style:{width:"100%",padding:"var(--space-lg) 0"},children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.2rem",marginBottom:"var(--space-md)"},children:"ENTER CODE"}),(0,a.jsxs)("form",{onSubmit:u,children:[(0,a.jsx)("input",{ref:p,type:"text",className:"brutal-input",placeholder:"XXXXX",maxLength:10,value:l,onChange:e=>o(e.target.value.toUpperCase()),disabled:i,"aria-label":"Enter download code"}),(0,a.jsx)("button",{type:"submit",className:"brutal-button",style:{width:"100%",marginTop:"var(--space-lg)"},disabled:i||l.length<5,children:i?"SEARCHING...":"GET FILE"})]})]})}function h(){let{state:e,reset:t}=(0,n.useApp)(),{code:r,originalName:l,size:o}=e.data||{};return(0,s.useEffect)(()=>{if(r){let e=setTimeout(async()=>{try{let e=await fetch("/api/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r})}),t=await e.json();t.url?window.location.href=t.url:console.error("Download failed",t.error)}catch(e){console.error("Download network error")}},1e3);return()=>clearTimeout(e)}},[r]),(0,a.jsxs)("div",{className:"text-center",style:{width:"100%",padding:"var(--space-lg) 0"},children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.2rem",marginBottom:"var(--space-md)"},children:"DOWNLOADING..."}),(0,a.jsxs)("div",{className:"brutal-container",style:{backgroundColor:"var(--color-bg-mint)"},children:[(0,a.jsx)("p",{className:"font-bold",style:{fontSize:"1.5rem",wordBreak:"break-all"},children:l}),(0,a.jsx)("p",{className:"text-mono",style:{marginTop:"var(--space-sm)"},children:(e=>{if(void 0===e||0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]})(o)})]}),(0,a.jsx)("div",{className:"brutal-progress",style:{marginTop:"var(--space-lg)"},children:(0,a.jsx)("div",{className:"brutal-progress-fill",style:{width:"100%",animation:"pulse 2s infinite"}})}),(0,a.jsx)("button",{className:"brutal-button",onClick:t,style:{marginTop:"var(--space-xl)",width:"100%"},children:"SEND A FILE"})]})}function x(){let{state:e,reset:t}=(0,n.useApp)(),{error:r}=e;return(0,a.jsxs)("div",{className:"text-center",style:{width:"100%",padding:"var(--space-lg) 0"},children:[(0,a.jsxs)("div",{className:"brutal-error brutal-container",style:{marginBottom:"var(--space-lg)"},children:[(0,a.jsx)("p",{className:"font-bold uppercase",style:{fontSize:"1.5rem",color:"var(--color-accent-red)"},children:"ERROR"}),(0,a.jsx)("p",{style:{marginTop:"var(--space-md)",fontSize:"1.2rem"},children:r||"SOMETHING WENT WRONG"})]}),(0,a.jsx)("button",{className:"brutal-button",onClick:t,style:{width:"100%"},children:"TRY AGAIN"})]})}function y(e){let{onComplete:t}=e,[r,n]=(0,s.useState)("DROP");return(0,s.useEffect)(()=>{let e=setTimeout(()=>{n("IMPACT")},600),r=setTimeout(()=>{n("CODE")},650),a=setTimeout(()=>{t&&t()},1800);return()=>{clearTimeout(e),clearTimeout(r),clearTimeout(a)}},[t]),(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-zinc-900 overflow-hidden",children:["DROP"===r&&(0,a.jsx)("div",{className:"absolute w-8 h-8 bg-white animate-drop",style:{top:"50%",left:"50%",marginLeft:"-1rem",marginTop:"-1rem"}}),"IMPACT"===r&&(0,a.jsx)("div",{className:"relative w-20 h-20 flex items-center justify-center",children:[0,45,90,135,180,225,270,315].map((e,t)=>(0,a.jsx)("div",{className:"absolute w-1 h-6 bg-white animate-burst origin-center",style:{transform:"rotate(".concat(e,"deg)"),"--tx":"".concat(80*Math.cos(e*Math.PI/180),"px"),"--ty":"".concat(80*Math.sin(e*Math.PI/180),"px")}},t))}),("IMPACT"===r||"CODE"===r)&&(0,a.jsx)("div",{className:"absolute z-10 flex flex-col items-center ".concat("CODE"===r?"opacity-100":"opacity-0"),children:(0,a.jsx)("h1",{className:"text-6xl font-black text-white tracking-widest animate-code font-mono",style:{textShadow:"0 0 20px rgba(255,255,255,0.2)"},children:"HJ7MC"})})]})}function g(){let{state:e,setMode:t,reset:r}=(0,n.useApp)(),[l,o]=(0,s.useState)(!0);return l?(0,a.jsx)(y,{onComplete:()=>o(!1)}):(0,a.jsxs)("div",{className:"full-screen",children:[(0,a.jsx)("div",{style:{position:"absolute",top:"2rem",right:"2rem"},children:(0,a.jsx)("button",{className:"brutal-button",style:{padding:"0.5rem 1rem",fontSize:"0.8rem"},onClick:()=>t("UPLOAD"===e.mode?"DOWNLOAD":"UPLOAD"),children:"UPLOAD"===e.mode?"SWITCH TO DOWNLOAD":"SWITCH TO UPLOAD"})}),(0,a.jsxs)("div",{className:"brutal-container",style:{maxWidth:"600px",width:"100%",minHeight:"400px",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,a.jsx)("h1",{className:"text-center",style:{marginBottom:"var(--space-xl)",cursor:"pointer"},onClick:r,role:"button",tabIndex:0,onKeyDown:e=>("Enter"===e.key||" "===e.key)&&r(),children:"DropCode"}),"IDLE"===e.status&&(0,a.jsx)(p,{}),"UPLOADING"===e.status&&(0,a.jsx)(u,{}),"GENERATED"===e.status&&(0,a.jsx)(m,{}),"DOWNLOAD_ENTRY"===e.status&&(0,a.jsx)(f,{}),"DOWNLOADING"===e.status&&(0,a.jsx)(h,{}),"ERROR"===e.status&&(0,a.jsx)(x,{})]})]})}},7306:function(e,t,r){"use strict";r.r(t),r.d(t,{AppProvider:function(){return i},useApp:function(){return c}});var a=r(3827),s=r(4090);let n={status:"IDLE",data:null,error:null,progress:0,mode:"UPLOAD"};function l(e,t){switch(t.type){case"SET_MODE":return{...e,mode:t.payload,status:"UPLOAD"===t.payload?"IDLE":"DOWNLOAD_ENTRY",error:null};case"START_UPLOAD":return{...e,status:"UPLOADING",progress:0,error:null};case"SET_PROGRESS":return{...e,progress:t.payload};case"UPLOAD_SUCCESS":return{...e,status:"GENERATED",data:t.payload,progress:100};case"UPLOAD_ERROR":return{...e,status:"ERROR",error:t.payload,progress:0};case"ENTER_DOWNLOAD":return{...e,status:"DOWNLOAD_ENTRY",error:null,data:null};case"FETCH_FILE_START":return{...e,status:"DOWNLOADING",progress:0,error:null};case"FETCH_FILE_SUCCESS":return{...e,status:"DOWNLOADING",data:t.payload};case"FETCH_FILE_ERROR":return{...e,status:"ERROR",error:t.payload};case"RESET":return{...n,mode:e.mode};default:return e}}let o=(0,s.createContext)(null);function i(e){let{children:t}=e,[r,i]=(0,s.useReducer)(l,n);return(0,a.jsx)(o.Provider,{value:{state:r,setMode:e=>i({type:"SET_MODE",payload:e}),startUpload:()=>i({type:"START_UPLOAD"}),setProgress:e=>i({type:"SET_PROGRESS",payload:e}),uploadSuccess:e=>i({type:"UPLOAD_SUCCESS",payload:e}),uploadError:e=>i({type:"UPLOAD_ERROR",payload:e}),enterDownload:()=>i({type:"ENTER_DOWNLOAD"}),fetchFileStart:()=>i({type:"FETCH_FILE_START"}),fetchFileSuccess:e=>i({type:"FETCH_FILE_SUCCESS",payload:e}),fetchFileError:e=>i({type:"FETCH_FILE_ERROR",payload:e}),reset:()=>i({type:"RESET"})},children:t})}function c(){let e=(0,s.useContext)(o);if(!e)throw Error("useApp must be used within an AppProvider");return e}}},function(e){e.O(0,[878,971,69,744],function(){return e(e.s=7855)}),_N_E=e.O()}]);